# The Decree å®ç°å®ŒæˆæŠ¥å‘Š

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1. å¾·å·æ‰‘å…‹ç‰Œå‹è¯„ä¼°å™¨ (`TexasHoldEmEvaluator.ts`)

å®Œæ•´å®ç°äº†å¾·å·æ‰‘å…‹çš„æ‰€æœ‰ç‰Œå‹è¯†åˆ«å’Œæ¯”è¾ƒé€»è¾‘ï¼š

- âœ… **ç‰Œå‹è¯†åˆ«**ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š
  - çš‡å®¶åŒèŠ±é¡º (Royal Flush)
  - åŒèŠ±é¡º (Straight Flush)
  - å››æ¡ (Four of a Kind)
  - è‘«èŠ¦ (Full House)
  - åŒèŠ± (Flush)
  - é¡ºå­ (Straight)
  - ä¸‰æ¡ (Three of a Kind)
  - ä¸¤å¯¹ (Two Pair)
  - ä¸€å¯¹ (One Pair)
  - é«˜ç‰Œ (High Card)

- âœ… **ç‰¹æ®ŠåŠŸèƒ½**ï¼š
  - ä» 5-7 å¼ ç‰Œä¸­é€‰å‡ºæœ€ä½³ 5 å¼ ç‰Œç»„åˆ
  - å®Œæ•´çš„ç‰Œå‹æ¯”è¾ƒï¼ˆåŒ…æ‹¬è¸¢è„šç‰Œï¼‰
  - **å¹³å±€åˆ¤å®š**ï¼šå½“ç‰Œå‹å’Œç‚¹æ•°å®Œå…¨ç›¸åŒæ—¶ï¼Œé€å¼ æ¯”è¾ƒèŠ±è‰²ï¼ˆâ™  > â™¥ > â™£ > â™¦ï¼‰

### 2. The Decree æ¸¸æˆæ¨¡å¼ (`TheDecreeMode.ts`)

å®Œæ•´å®ç°äº†æ‰€æœ‰æ¸¸æˆè§„åˆ™ï¼š

#### A. æ¸¸æˆåˆå§‹åŒ–
- âœ… æ”¯æŒ 2-4 äººæ¸¸æˆ
- âœ… æ ‡å‡† 52 å¼ ç‰Œï¼ˆæ— å¤§å°ç‹ï¼‰
- âœ… å‘æ”¾ 4 å¼ å…¬å…±ç‰Œ
- âœ… æ¯äºº 5 å¼ æ‰‹ç‰Œ
- âœ… æ´—ç‰Œç®—æ³•ï¼ˆFisher-Yatesï¼‰

#### B. é¦–ä»»åº„å®¶é€‰æ‹©
- âœ… æ¯ä½ç©å®¶å±•ç¤ºä¸€å¼ ç‰Œ
- âœ… æ¯”è¾ƒç‚¹æ•°ï¼ˆA > K > ... > 2ï¼‰
- âœ… ç‚¹æ•°ç›¸åŒåˆ™æ¯”è¾ƒèŠ±è‰²ï¼ˆâ™  > â™¥ > â™£ > â™¦ï¼‰
- âœ… æœ€å¤§ç‰Œè€…æˆä¸ºé¦–ä»»åº„å®¶

#### C. å›åˆæµç¨‹
1. **é˜¶æ®µ Aï¼šåº„å®¶å®šç­–**
   - âœ… åº„å®¶æŒ‡å®šå‡ºç‰Œæ•°é‡ï¼ˆ1/2/3 å¼ ï¼‰

2. **é˜¶æ®µ Bï¼šå‡ºç‰Œä¸äº®ç‰Œ**
   - âœ… æ‰€æœ‰ç©å®¶åŒæ—¶é€‰ç‰Œ
   - âœ… éªŒè¯å‡ºç‰Œåˆæ³•æ€§
   - âœ… ç¡®ä¿ç©å®¶æ‹¥æœ‰é€‰å®šçš„ç‰Œ

3. **é˜¶æ®µ Cï¼šç»„ç‰Œä¸æ¯”æ‹¼**
   - âœ… å°†æ‰“å‡ºçš„ç‰Œä¸å…¬å…±ç‰Œç»„åˆ
   - âœ… ä»ä¸­é€‰å‡ºæœ€ä½³ 5 å¼ ç‰Œ
   - âœ… ä½¿ç”¨å¾·å·æ‰‘å…‹è§„åˆ™æ¯”è¾ƒç‰Œå‹

4. **é˜¶æ®µ Dï¼šç»“ç®—ä¸ç§¯åˆ†**
   - âœ… åŸºç¡€åˆ†æ•°è¡¨ï¼š
     ```
     é«˜ç‰Œ: 0åˆ†, ä¸€å¯¹: 1åˆ†, ä¸¤å¯¹: 2åˆ†
     ä¸‰æ¡: 3åˆ†, é¡ºå­: 4åˆ†, åŒèŠ±: 5åˆ†
     è‘«èŠ¦: 6åˆ†, å››æ¡: 7åˆ†, åŒèŠ±é¡º: 8åˆ†
     çš‡å®¶åŒèŠ±é¡º: 9åˆ†
     ```
   - âœ… èƒœè€…é¢å¤– +1 åˆ†
   - âœ… è´¥è€…è·å¾—ä¸‹ä¸€è½®åº„å®¶æƒ

5. **é˜¶æ®µ Eï¼šè¡¥ç‰Œ**
   - âœ… ä»åº„å®¶å¼€å§‹é¡ºæ—¶é’ˆè¡¥ç‰Œ
   - âœ… è¡¥æ»¡è‡³ 5 å¼ ï¼ˆç‰Œå †å…è®¸çš„æƒ…å†µä¸‹ï¼‰
   - âœ… ç‰Œå †è€—å°½åè¿›å…¥æ®‹å±€é˜¶æ®µ

#### D. æ¸¸æˆç»“æŸ
- âœ… æ‰€æœ‰ç©å®¶æ‰‹ç‰Œå‡ºå®Œæ—¶ç»“æŸ
- âœ… ç»Ÿè®¡æ€»åˆ†
- âœ… æœ€é«˜åˆ†è€…è·èƒœ

### 3. æ¸¸æˆçŠ¶æ€ç®¡ç†

å®Œæ•´çš„çŠ¶æ€æœºå®ç°ï¼š

```typescript
enum GameState {
    SETUP,                    // åˆå§‹åŒ–
    FIRST_DEALER_SELECTION,   // é€‰æ‹©é¦–ä»»åº„å®¶
    DEALER_CALL,              // åº„å®¶å®šç­–
    PLAYER_SELECTION,         // ç©å®¶é€‰ç‰Œ
    SHOWDOWN,                 // äº®ç‰Œæ¯”æ‹¼
    SCORING,                  // è®¡åˆ†
    REFILL,                   // è¡¥ç‰Œ
    GAME_OVER                 // æ¸¸æˆç»“æŸ
}
```

### 4. å…¬å¼€ API

The Decree Mode æä¾›çš„ä¸»è¦æ¥å£ï¼š

```typescript
// æ¸¸æˆåˆå§‹åŒ–
initGame(playerIds: string[]): void
dealCards(): void

// é¦–ä»»åº„å®¶é€‰æ‹©
selectFirstDealer(revealedCards: Map<string, number>): string

// å›åˆç®¡ç†
startNewRound(dealerId: string): void
dealerCall(cardsToPlay: 1 | 2 | 3): boolean
playCards(cards: number[], playerId: string): boolean

// è¡¥ç‰Œ
refillHands(): void

// æŸ¥è¯¢çŠ¶æ€
getState(): GameState
getCommunityCards(): number[]
getPlayerState(playerId: string): PlayerState
getCurrentRound(): RoundState
getDeckSize(): number
getScores(): Map<string, number>
isGameOver(): boolean
```

## ğŸ“Š ä»£ç ç»Ÿè®¡

- **TexasHoldEmEvaluator.ts**: ~600 è¡Œ
- **TheDecreeMode.ts**: ~450 è¡Œ
- æ€»è®¡: ~1050 è¡Œæ ¸å¿ƒæ¸¸æˆé€»è¾‘

## ğŸ® ä½¿ç”¨ç¤ºä¾‹

```typescript
import { TheDecreeMode } from "./Core/GameMode/TheDecreeMode";
import { GameModeFactory } from "./Core/GameMode/GameModeFactory";

// æ–¹å¼ 1ï¼šç›´æ¥åˆ›å»º
const game = new TheDecreeMode();

// æ–¹å¼ 2ï¼šé€šè¿‡å·¥å‚åˆ›å»º
const factory = GameModeFactory.getInstance();
const game = factory.createGameMode('the_decree') as TheDecreeMode;

// åˆå§‹åŒ–æ¸¸æˆ
const playerIds = ['player1', 'player2', 'player3'];
game.initGame(playerIds);
game.dealCards();

// é€‰æ‹©é¦–ä»»åº„å®¶
const revealedCards = new Map([
    ['player1', 0x30 | 0x0E],  // â™ A
    ['player2', 0x20 | 0x0D],  // â™¥K
    ['player3', 0x10 | 0x0E]   // â™£A
]);
const firstDealer = game.selectFirstDealer(revealedCards);

// å¼€å§‹ç¬¬ä¸€è½®
game.startNewRound(firstDealer);

// åº„å®¶å®šç­–ï¼šæ‰“ 2 å¼ ç‰Œ
game.dealerCall(2);

// ç©å®¶å‡ºç‰Œ
game.playCards([card1, card2], 'player1');
game.playCards([card3, card4], 'player2');
game.playCards([card5, card6], 'player3');

// è‡ªåŠ¨è§¦å‘ Showdownï¼Œè®¡ç®—åˆ†æ•°

// è¡¥ç‰Œ
game.refillHands();

// æŸ¥è¯¢åˆ†æ•°
const scores = game.getScores();
```

## ğŸ”§ æŠ€æœ¯ç‰¹æ€§

1. **å®Œå…¨ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨ TypeScript æ¥å£å’Œæšä¸¾
2. **çŠ¶æ€éªŒè¯**ï¼šæ¯ä¸ªæ“ä½œéƒ½æ£€æŸ¥æ¸¸æˆçŠ¶æ€
3. **ä¸å¯å˜æ€§**ï¼šå…¬å…± API è¿”å›æ•°æ®çš„å‰¯æœ¬
4. **é”™è¯¯å¤„ç†**ï¼šæ‰€æœ‰å¼‚å¸¸æƒ…å†µéƒ½æœ‰æ˜ç¡®çš„é”™è¯¯ä¿¡æ¯
5. **å¯æ‰©å±•æ€§**ï¼šæ˜“äºæ·»åŠ æ–°åŠŸèƒ½ï¼ˆå¦‚ç‰¹æ®Šè§„åˆ™ã€å˜ä½“ï¼‰

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

### UI é›†æˆ
1. åˆ›å»º GameScene ç”¨äºå®é™…æ¸¸æˆ
2. å®ç°å¡ç‰Œæ˜¾ç¤ºç»„ä»¶
3. æ·»åŠ åŠ¨ç”»æ•ˆæœï¼ˆå‘ç‰Œã€ç¿»ç‰Œã€å¾—åˆ†ï¼‰

### åŠŸèƒ½æ‰©å±•
1. æˆ¿é—´ç³»ç»Ÿé›†æˆ
2. ç½‘ç»œåŒæ­¥ï¼ˆå¦‚éœ€å¤šäººåœ¨çº¿ï¼‰
3. AI ç©å®¶ï¼ˆå•æœºæ¨¡å¼ï¼‰
4. å›æ”¾åŠŸèƒ½
5. ç»Ÿè®¡æ•°æ®ï¼ˆèƒœç‡ã€æœ€ä½³ç‰Œå‹ç­‰ï¼‰

### æµ‹è¯•
1. åˆ›å»ºå•å…ƒæµ‹è¯•
2. æµ‹è¯•æ‰€æœ‰ç‰Œå‹è¯†åˆ«
3. æµ‹è¯•å¹³å±€åˆ¤å®š
4. æµ‹è¯•è¾¹ç•Œæƒ…å†µï¼ˆç‰Œå †è€—å°½ç­‰ï¼‰

---

**The Decree æ ¸å¿ƒæ¸¸æˆé€»è¾‘å·²å®Œå…¨å®ç°ï¼** ğŸ‰

å¯ä»¥å¼€å§‹è¿›è¡Œ UI é›†æˆæˆ–æµ‹è¯•äº†ã€‚
